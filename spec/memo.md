# 天秤AI（複数LLM出力比較）プロダクト設計まとめ

## 1. 開発の進め方（当日の流れ）

### ① チームキックオフ

* 挨拶
* 進捗表の確認
* 役割分担
* リーダーへの相談事項共有

### ② 開発環境準備

* GitHub Repository 作成

  * Private Repository
  * メンターをコラボレーターとして招待

### ③ 設計フェーズ

* **アプリケーションアーキテクチャ**の相談・決定
* **DB設計** 着手（素案作成）
* **インフラ設計** 着手（素案作成）

### ④ 夕会

* アプリケーションアーキテクチャの進捗共有
* DB設計 / インフラ設計の進捗があれば説明

---

## 2. プロダクト要件整理

### ✅ やること（MVP）

* **2つのLLMを同時実行**
* **LLMごとの出力比較表示**
* **チャット履歴の保存**
* **トークン使用量の集計**

  * チャット単位で
  * 金額感を画面上に表示

### ❌ 今回やらないこと（スコープ外）

* ログイン機能
* 3つ以上のLLM対応
* 「基本 / 高度」などのモード分け
* 壁打ち機能
* やり直し / リセット機能

👉 **比較体験に集中したシンプルな構成**

---

## 3. アプリケーション構成

### Frontend

* **React（シンプル構成）**

  * React Router

    * 画面遷移・ルーティング管理
  * Vite

    * 高速ビルド・開発体験向上
* SSRについて

  * 初期は **CSR前提**
  * SEOや初期表示速度が課題になったら SSR検討

---

### Backend

* **Fastify**

  * 高速
  * 軽量
  * LLM APIの同時実行・集計処理に向いている

---

## 4. インフラ構成（AWS）

### 全体像（シンプル構成）

```
[ Browser ]
     |
[ Amplify Hosting (React) ]
     |
[ API (Fastify) - ECS Fargate ]
     |
-------------------------------
|           DB                |
|  Aurora(MySQL) / DynamoDB   |
-------------------------------
```

---

### Frontend（ホスティング）

* **Amplify Hosting**

  * React SPA をホスティング
  * CI/CD が簡単
  * フロントエンド開発に集中できる

---

### Backend（API）

* **ECS on Fargate**

  * Fastify APIをコンテナで運用
  * サーバーレス寄りの運用（EC2管理なし）
* デプロイ方針

  * 運用上は **Amplify経由でデプロイ統合**
  * フロントとバックのデプロイ体験を揃える

---

## 5. データベース設計方針

### RDB（構造化データ）

* **Aurora MySQL 8.0**
* 用途

  * チャットメタ情報

    * セッション
    * 使用LLM
    * トークン数
    * 金額
  * 集計・一覧表示向け

---

### NoSQL（履歴データ）

* **DynamoDB**
* 用途

  * チャット履歴（発言・LLM出力）
  * 時系列データ
  * 高速な書き込み・取得

---

### Cache（将来拡張）

* **ElastiCache for Redis（任意）**
* 用途（必要になったら）

  * チャット履歴の高速参照
  * 同一セッションのレスポンス改善

※ MVPでは **省略可能**

---

## 6. 設計の思想（チームで共有したいポイント）

* **まずは比較体験を最速で作る**
* スケール前提だが、初期は作りすぎない
* ログイン・高度機能は明確にスコープ外
* RDB + NoSQL の役割分離を明確に
* 「あとで拡張しやすい」構成に留める

---

もし次のステップとして、

* **アプリケーションアーキテクチャ図**
* **DBテーブル設計（ER図レベル）**
* **API設計（エンドポイント一覧）**
* **LLM同時実行の実装方針（Promise / 並列処理）**

まで落としたいなら、
👉「次はどこまで決めたいか」教えてください。そこ一気に詰めましょう。
